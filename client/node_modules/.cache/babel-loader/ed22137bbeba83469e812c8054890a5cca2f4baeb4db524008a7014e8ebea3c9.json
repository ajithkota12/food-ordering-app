{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kota Ajith Kumar\\\\Desktop\\\\f\\\\food-ordering-app\\\\client\\\\src\\\\context\\\\GeneralContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GeneralContext = /*#__PURE__*/createContext();\nconst GeneralContextProvider = ({\n  children\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [usertype, setUsertype] = useState('');\n  const [restaurantAddress, setRestaurantAddress] = useState('');\n  const [restaurantImage, setRestaurantImage] = useState('');\n  const [productSearch, setProductSearch] = useState('');\n  const [cartCount, setCartCount] = useState(0);\n  useEffect(() => {\n    fetchCartCount();\n  }, []);\n  const fetchCartCount = async () => {\n    try {\n      const userId = localStorage.getItem('userId');\n      if (userId) {\n        const response = await axios.get('http://localhost:6001/fetch-cart');\n        setCartCount(response.data.filter(item => item.userId === userId).length);\n      }\n    } catch (err) {\n      console.error('Cart Count Error:', err);\n    }\n  };\n  const handleSearch = () => {\n    navigate('#products-body');\n  };\n  const login = async () => {\n    try {\n      const loginInputs = {\n        email,\n        password\n      };\n      const res = await axios.post('http://localhost:6001/login', loginInputs);\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n      if (res.data.usertype === 'customer') {\n        navigate('/');\n      } else if (res.data.usertype === 'admin') {\n        navigate('/admin');\n      } else if (res.data.usertype === 'restaurant') {\n        navigate('/restaurant');\n      }\n    } catch (err) {\n      console.error('Login Error:', err);\n      alert('Login failed! Please check your credentials.');\n    }\n  };\n  const inputs = {\n    username,\n    email,\n    usertype,\n    password,\n    restaurantAddress,\n    restaurantImage\n  };\n  const register = async () => {\n    try {\n      const res = await axios.post('http://localhost:6001/register', inputs);\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n      if (res.data.usertype === 'customer') {\n        navigate('/');\n      } else if (res.data.usertype === 'admin') {\n        navigate('/admin');\n      } else if (res.data.usertype === 'restaurant') {\n        navigate('/restaurant');\n      }\n    } catch (err) {\n      console.error('Registration Error:', err);\n      alert('Registration failed! Please try again.');\n    }\n  };\n  const logout = () => {\n    localStorage.clear();\n    setUsername('');\n    setEmail('');\n    setPassword('');\n    setUsertype('');\n    setRestaurantAddress('');\n    setRestaurantImage('');\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(GeneralContext.Provider, {\n    value: {\n      login,\n      register,\n      logout,\n      username,\n      setUsername,\n      email,\n      setEmail,\n      password,\n      setPassword,\n      usertype,\n      setUsertype,\n      setRestaurantAddress,\n      setRestaurantImage,\n      productSearch,\n      setProductSearch,\n      handleSearch,\n      cartCount,\n      fetchCartCount\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(GeneralContextProvider, \"Ul/hKGmZ2ctSk/CFfS/dCMRWz1c=\", false, function () {\n  return [useNavigate];\n});\n_c = GeneralContextProvider;\nexport default GeneralContextProvider;\nvar _c;\n$RefreshReg$(_c, \"GeneralContextProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","useNavigate","jsxDEV","_jsxDEV","GeneralContext","GeneralContextProvider","children","_s","navigate","username","setUsername","email","setEmail","password","setPassword","usertype","setUsertype","restaurantAddress","setRestaurantAddress","restaurantImage","setRestaurantImage","productSearch","setProductSearch","cartCount","setCartCount","fetchCartCount","userId","localStorage","getItem","response","get","data","filter","item","length","err","console","error","handleSearch","login","loginInputs","res","post","setItem","_id","alert","inputs","register","logout","clear","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Kota Ajith Kumar/Desktop/f/food-ordering-app/client/src/context/GeneralContext.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const GeneralContext = createContext();\r\n\r\nconst GeneralContextProvider = ({ children }) => {\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [usertype, setUsertype] = useState('');\r\n  const [restaurantAddress, setRestaurantAddress] = useState('');\r\n  const [restaurantImage, setRestaurantImage] = useState('');\r\n\r\n  const [productSearch, setProductSearch] = useState('');\r\n  const [cartCount, setCartCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchCartCount();\r\n  }, []);\r\n\r\n  const fetchCartCount = async () => {\r\n    try {\r\n      const userId = localStorage.getItem('userId');\r\n      if (userId) {\r\n        const response = await axios.get('http://localhost:6001/fetch-cart');\r\n        setCartCount(response.data.filter(item => item.userId === userId).length);\r\n      }\r\n    } catch (err) {\r\n      console.error('Cart Count Error:', err);\r\n    }\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    navigate('#products-body');\r\n  };\r\n\r\n  const login = async () => {\r\n    try {\r\n      const loginInputs = { email, password };\r\n      const res = await axios.post('http://localhost:6001/login', loginInputs);\r\n\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      if (res.data.usertype === 'customer') {\r\n        navigate('/');\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'restaurant') {\r\n        navigate('/restaurant');\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Login Error:', err);\r\n      alert('Login failed! Please check your credentials.');\r\n    }\r\n  };\r\n\r\n  const inputs = { username, email, usertype, password, restaurantAddress, restaurantImage };\r\n\r\n  const register = async () => {\r\n    try {\r\n      const res = await axios.post('http://localhost:6001/register', inputs);\r\n\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      if (res.data.usertype === 'customer') {\r\n        navigate('/');\r\n      } else if (res.data.usertype === 'admin') {\r\n        navigate('/admin');\r\n      } else if (res.data.usertype === 'restaurant') {\r\n        navigate('/restaurant');\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Registration Error:', err);\r\n      alert('Registration failed! Please try again.');\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    setUsername('');\r\n    setEmail('');\r\n    setPassword('');\r\n    setUsertype('');\r\n    setRestaurantAddress('');\r\n    setRestaurantImage('');\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <GeneralContext.Provider value={{\r\n      login,\r\n      register,\r\n      logout,\r\n      username, setUsername,\r\n      email, setEmail,\r\n      password, setPassword,\r\n      usertype, setUsertype,\r\n      setRestaurantAddress,\r\n      setRestaurantImage,\r\n      productSearch, setProductSearch,\r\n      handleSearch,\r\n      cartCount, fetchCartCount\r\n    }}>\r\n      {children}\r\n    </GeneralContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GeneralContextProvider;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}